tinymce.PluginManager.add("imageupload",function(n){function t(){var i=n.dom,t=$('<input type="file" name="file" accept="image/jpg,image/jpeg,image/png,image/gif">');t.on("change",function(){var r=$("<form/>",{action:n.settings.upload_image_url,style:"display:none",method:"post",enctype:"multipart/form-data"});r.append(t);r.ajaxSubmit({beforeSubmit:function(){return!0},success:function(t){n.selection.setContent(i.createHTML("img",{src:t}))}})});t.click()}n.addCommand("mceUploadImageEditor",t);n.ui.registry.addButton("imageupload",{icon:"image",tooltip:"图片上传",onAction:t});n.ui.registry.addMenuItem("imageupload",{icon:"image",text:"图片上传",context:"tools",onAction:t})});